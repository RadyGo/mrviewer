<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Creating the Database</title><meta content="Gonzalo Garramuño" name="author"><link rel="stylesheet" href="file:///home/gga/code/Maya/mrLiquid/mrViewer/docs/stylesheet.css" type="text/css"></head>
<body><h1 style="text-align: center;">Creating the Database</h1><p>There are two ways to create your database. &nbsp;One if using basic SQL which is specific to each database.</p><p>The
other, more powerful way, is to use rails' migrations with the rails
project provided with mrViewer. &nbsp;Either way, you will need to
create an administrative user in the database which will have a
password and have permissions to create or drop tables in the database.</p><p>First, we'll see how we can create the database using basic SQL.</p><p>Logging
in as an administrator or as the dabase administrator, from a console
window do:</p><div class="console"><span style="font-weight: bold;">$ su postgres
&nbsp;# For Unix only, under windows you need to log out and log in
again<br></span>Password:<span style="font-weight: bold;"><br>postgres$
createdb -U
postgres
assets2d_production</span><span style="font-family: monospace;"><br></span>CREATE
DATABASE</div><p>If the administrative user ( postgres in
this case ) has a password, you
may also need to type it in.</p><p>This will create a
database for storing all our 2D assets. &nbsp;If you have problems
creating the database, it can be because the user given does not have
permissions to create the database. &nbsp;Refer to the postgreSQL
manual regarding permissions.&nbsp;&nbsp; &nbsp;</p><p>Afterwards,
you
need to create the actual tables needed for storing all of mrViewer's
data. &nbsp; mrViewer already ships with a PostgreSQL SQL file the
you can use to do this automatically. &nbsp;To do so, log in to the
database, by doing:</p><div class="console"><span style="font-weight: bold;">postgres$ cd &lt;mrViewer
directory&gt;/sql<br>postgres$ psql assets2d_production<br></span>Welcome
to psql 7.4.13, the PostgreSQL interactive terminal.<br><br>Type:&nbsp;
\copyright for distribution terms<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\h for help with SQL commands<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\? for help on internal slash commands<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\g or terminate with semicolon to execute query<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\q to quit<br><br>assets2d_production=# <span style="font-weight: bold;">\i assets2d.sql<br></span>...several
notices...<span style="font-weight: bold;"></span></div><p>The
\i command inside postgreSQL allows loading a previously created SQL
file. &nbsp;The assets2d.sql file ships with mrViewer inside its
sql directory.</p><p>Once the file is loaded, it will
create a lot of tables. &nbsp;At the end, running the \dt command
(describe tables) should show a list of tables similar to the one shown
below.<span style="font-weight: bold;"><br></span></p><div class="console"><span style="font-weight: bold;"></span>assets2d_production=#
<span style="font-weight: bold;">\dt<br></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
List of relations<br>&nbsp;Schema
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
Type&nbsp; |&nbsp; Owner<br>--------+------------------+-------+----------<br>&nbsp;public
|
audios&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| table | postgres<br>&nbsp;public |
categories&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| table | postgres<br>&nbsp;public |
color_profiles&nbsp;&nbsp; | table | postgres<br>&nbsp;public
| image_categories | table | postgres<br>&nbsp;public |
images&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| table | postgres<br>&nbsp;public |
sequences&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| table | postgres<br>&nbsp;public |
shots&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| table | postgres<br>&nbsp;public |
shows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| table | postgres<span style="font-weight: bold;"></span></div><p>The
SQL file will also create a 'mrviewer' user and give it limited
permissions to access the database and tables. &nbsp; By default,
this 'mrviewer' user is created with a password of 'mrviewer'.
&nbsp;You will also probably want to change the password for
security.</p><div class="console">assets2d_production=#&nbsp;<span style="font-weight: bold;">ALTER USER mrviewer WITH PASSWORD
'newpassword';</span></div><p>Congratulations, you
are now done with PostgreSQL! &nbsp;Exit it, with:</p><div class="console">assets2d_production=#&nbsp;
\q</div><h2 style="text-decoration: underline;"></h2></body></html>